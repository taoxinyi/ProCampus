; (function(){function d(k){k.setAttribute("class","easyEditor");k.spellcheck=true;k.contentEditable="true";k.focus();j(k);k.blur();window.scrollTo(0,0);if((typeof Range!=="undefined")&&!Range.prototype.createContextualFragment){Range.prototype.createContextualFragment=function(l){var n=document.createDocumentFragment(),m=document.createElement("div");n.appendChild(m);m.outerHTML=l;return n}}b(k);k.onclick=function(){f(k)};k.onkeyup=function(){f(k)};k.onkeypress=function(){f(k)};k.ondrop=function(l){var l=l||window.event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}}}function b(l){try{document.execCommand("AutoUrlDetect",false,false)}catch(k){}l.onpaste=function(n){var n=n||window.event;if(n.preventDefault){n.preventDefault()}else{n.returnValue=false}var p=null;if(window.clipboardData&&clipboardData.setData){p=window.clipboardData.getData("text")}else{p=(n.originalEvent||n).clipboardData.getData("text/plain")}if(document.body.createTextRange){if(document.selection){textRange=document.selection.createRange()}else{if(window.getSelection){var o=window.getSelection();var m=o.getRangeAt(0);var q=document.createElement("span");q.innerHTML="&#FEFF;";m.deleteContents();m.insertNode(q);textRange=document.body.createTextRange();textRange.moveToElementText(q);q.parentNode.removeChild(q)}}textRange.text=p;textRange.collapse(false);textRange.select()}else{document.execCommand("insertText",false,p)}}}function f(r){var k=r.textContent;var o=r.innerHTML;var l=k.length;var n=o.length;if(l==0&&n!=0){if(n==4){var m=r.getElementsByTagName("br");h(m[m.length-1])}else{if(n==11||n==13){var q=r.getElementsByTagName("p");h(q[q.length-1])}else{if(n==15){var s=r.getElementsByTagName("div");h(s[s.length-1])}}}}if(document.activeElement.id==r.id){j(r)}}function c(n,l){if(n.ran==undefined){n.focus();j(n)}var k=n.ran.createContextualFragment(l);var m=k.lastChild;n.ran.deleteContents();n.ran.insertNode(k);n.ran.setStartAfter(m);n.sel.removeAllRanges();n.sel.addRange(n.ran);n.focus()}function j(k){k.sel=e(k);if(k.sel==null){return false}else{(window.getSelection)?k.ran=k.sel.getRangeAt(0):k.ran=k.sel.createRange()}}function e(l){if(window.getSelection){var k=window.getSelection();if(k.rangeCount>0){return k}}else{if(document.selection){var k=document.selection;return k.createRange()}}return null}function g(m){var l=m.getBoundingClientRect();var k=document.documentElement.clientLeft;var n=document.documentElement.clientTop;return{left:l.left-k,top:l.top-n,right:l.right-k,bottom:l.bottom-n,width:l.right-l.left,height:l.bottom-l.top}}function h(l){var k=l.parentNode;if(k){k.removeChild(l)}}var i={placeholder:function(k){this.obj.setAttribute("placeholder",k||"");return this},insertEmoji:function(k){if(k.src==undefined){console.error("insert emoji src is not define");return false}if(!k.remark){k.remark=""}var l='<img src="'+k.src+'" easy-remark="'+k.remark+'" />';c(this.obj,l);if(k.afterInsert){k.afterInsert.call(this)}return this},insertBlock:function(m){c(this.obj,'<br id="changeLinear"/><span id="easyEditorSaveWidth">'+m.text+"</span>");var n=document.getElementById("easyEditorSaveWidth");var l=g(n).width;h(n);h(document.getElementById("changeLinear"));m.color=m.color==undefined?"":"color:"+m.color+";";var k='<input type="text" disabled="disabled" value="'+m.text+'" style="width:'+l+"px;"+m.color+'">';c(this.obj,k);if(m.afterInsert){m.afterInsert.call(this)}return this},getContent:function(q){var p=this.obj.innerHTML;if(typeof q=="function"){var o=q;var q=false}var n=this.obj.innerHTML;if(q){var r=this.obj.getElementsByTagName("input");for(var m=0;m<r.length;m++){var l=document.createElement("span");l.innerHTML="|"+r[m].getAttribute("value")+"|";r[m].parentNode.insertBefore(l,r[m])}var k=this.obj.getElementsByTagName("img");for(var m=0;m<k.length;m++){var l=document.createElement("span");l.innerHTML="|"+k[m].getAttribute("easy-remark")+"|";k[m].parentNode.insertBefore(l,k[m])}n=this.obj.innerHTML;n=n.replace(/<\/p>/g,"#easyEditor#");n=n.replace(/<\/div>/g,"#easyEditor#");n=n.replace(/<\/?[^>]*>/g,"");n=n.replace(/#easyEditor#/g,"<br />")}this.obj.innerHTML=p;this.obj.focus();return n}};window.easyEditor=function(k){if(k==undefined||null){console.error("[EasyEditor] editor id not no defined");return}return new a(k)};var a=function(k){this.obj=document.getElementById(k);d(this.obj)};a.prototype={placeholder:function(k){return i.placeholder.call(this,k)},insertEmoji:function(k){return i.insertEmoji.call(this,k)},insertBlock:function(k){return i.insertBlock.call(this,k)},getContent:function(k){return i.getContent.call(this,k)}}})();